plugins {
    id 'java'

    // Deprecated Gradle features were used in this build,
    // making it incompatible with Gradle 7.0.
//    id 'maven-publish'

    // JitPack only supports this
    id 'maven'
}

group 'com.github.dbchar'
version '0.0.2'

sourceCompatibility = JavaVersion.VERSION_11
targetCompatibility = JavaVersion.VERSION_11

repositories {
    jcenter()
    mavenCentral()
}

dependencies {
    implementation 'com.google.code.gson:gson:2.8.6'
    implementation 'org.json:json:20200518'
    implementation 'org.slf4j:slf4j-api:1.7.30'
    implementation 'org.apache.oltu.oauth2:org.apache.oltu.oauth2.client:1.0.2'
    implementation 'commons-codec:commons-codec:1.14'
    implementation 'org.xerial:sqlite-jdbc:3.31.1'
    testImplementation "org.junit.jupiter:junit-jupiter-api:5.6.2"
    testRuntimeOnly "org.junit.jupiter:junit-jupiter-engine:5.6.2"
}

test {
    useJUnitPlatform()
}

jar {
    manifest {
        attributes(
                'Implementation-Title': project.name,
                'Implementation-Version': project.version
        )
    }
}

wrapper { gradleVersion = '6.5' }
apply plugin : 'jacoco'

test {
  reports.html.setDestination(file("$projectDir/testReport"));
  jacoco {
    enabled = true
    includeNoLocationClasses = false
    sessionId = "<auto-generated value>"
    dumpOnExit = true
    classDumpDir = null
    output = JacocoTaskExtension.Output.FILE
}

jacocoTestReport {
  reports {
      xml.required = false
      csv.required = false
      html.outputLocation =  file("$projectDir/coverageReport")
  }
}
}